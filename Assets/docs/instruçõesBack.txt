Autenticação

POST /auth/login

Request JSON (aceitar qualquer uma das formas):

{ "email": "user@ex.com", "senha": "senha123" } ou

{ "cpf": "11111111111", "senha": "senha123" } ou

{ "username": "11111111111", "password": "senha123" }

Response success 200:

{
  "token": "<jwt-or-session-token>",
  "usuario": {
    "cpf": "11111111111",
    "nome": "Nome",
    "email": "x@x",
    "telefone": "0000-0000",
    "tipo_conta": "funcionario",
    // outros campos (sem senha)
  }
}


Errors:

401 { "message": "Credenciais inválidas" }

POST /auth/logout

Request: bearer token auth header (opcional)

Response 200 { "ok": true }

Observação: usar JWT Bearer tokens é recomendado. O frontend espera Authorization: Bearer <token>.

Usuários

GET /usuarios

Query params opcionais para filtro (ex: ?cpf=11111111111, ?tipo_conta=aluno)

Response 200: array de usuários (sem senha)

GET /usuarios/:cpf

Response 200: usuário

404 se não encontrado

POST /usuarios

Cria novo usuário

Request body (exemplo mínimo):

{
  "cpf": "11111111111",
  "nome": "Fulano",
  "email": "f@x.com",
  "telefone": "9999-9999",
  "tipo_conta": "aluno",
  "senha": "senha123" // backend deve armazenar hash, não plain text
}


Response 201: objeto criado (ou 200 com objeto)

Errors:

400 para payload inválido

409 para cpf já existente

PUT /usuarios/:cpf

Atualiza usuário (não deve permitir alterar cpf)

Request body: campos a atualizar (ex: nome, email, telefone, tipo_conta, curso, situacao, etc.)

Response 200: usuário atualizado

404 se não encontrado

DELETE /usuarios/:cpf

Remove usuário

Response 200: objeto removido ou 204

Observação: para páginas como Excluir usuário o frontend envia DELETE /usuarios/:cpf. Backend valida permissão (apenas administradores / gerência).

Alunos (opcional: podem ser geridos via users)

GET /alunos

Lista alunos, filtros por cpf, curso, situacao

GET /alunos/:cpf

POST /alunos

Cria registro de aluno (separado)

Request:

{ "cpf": "11111111111", "curso": "ADS", "situacao": "Ativo", "nome":"..." }


PUT /alunos/:cpf

Atualiza dados do aluno

DELETE /alunos/:cpf

Observação: seu frontend exige em alguns fluxos apenas PUT em /usuarios/:cpf para atribuir tipo_conta: 'aluno' e curso/situacao. É aceitável ter ambos: atualizar usuarios e manter coleção alunos sincronizada no backend.

Docentes

GET /docentes, GET /docentes/:cpf, POST /docentes, PUT /docentes/:cpf, DELETE /docentes/:cpf

Docente fields ex: { "cpf","nome","grau_academico","disciplina","carga_horaria" }

Fornecedores

GET /fornecedores, GET /fornecedores/:cnpj, POST /fornecedores, PUT /fornecedores/:cnpj, DELETE /fornecedores/:cnpj

Fields: { "cnpj", "razao_social", "contatos": [...], "servicos": [...] }

Cursos e Disciplinas

GET /cursos, GET /cursos/:codigo, POST /cursos, PUT /cursos/:codigo, DELETE /cursos/:codigo

Curso: { "codigo": "ADS", "nome": "Análise e Desenvolvimento", "disciplinas": ["ALG","LP"] }

GET /disciplinas, GET /disciplinas/:codigo, POST /disciplinas, PUT /disciplinas/:codigo, DELETE /disciplinas/:codigo

Disciplina: { "codigo":"ALG", "nome":"Algoritmos", "carga_horaria": 60 }

Notas

GET /notas?cpf=111... — lista todas as notas do aluno

GET /notas/:id

POST /notas

Criar nota:

{ "cpf":"11111111111", "disciplina":"ALG", "nota": 8.5 }


PUT /notas/:id

DELETE /notas/:id

Regras / Permissões (resumo)

Somente usuários com tipo_conta funcionario ou gerente (ou adm) podem criar/atualizar/remove usuários (admin endpoints). Alunos/docentes autogerenciáveis só podem atualizar seus próprios dados (PUT /usuarios/:cpf) com validação.

Endpoints que alteram dados devem exigir Authorization: Bearer <token>.

senha nunca deve ser retornada em responses; sempre retornar objetos do usuário sem campo de senha.

Retornar códigos HTTP corretos: 200 OK, 201 Created, 204 No Content, 400 Bad Request, 401 Unauthorized, 403 Forbidden, 404 Not Found, 409 Conflict.

3) Mapas rápidos para cada página do frontend (o que ela chama no backend)

Login: POST /auth/login — body (email/cpf + senha) — recebe token + usuario

Cadastro (usuário genérico): POST /usuarios — cria usuário

Inserir docente: PUT /docentes/:cpf (se já cadastrado) ou POST /docentes (criar); também atualiza usuarios/:cpf com tipo_conta: 'docente'

Inserir aluno: (segundo sua última regra) apenas PUT PUT /usuarios/:cpf para converter em aluno e adicionar curso e situacao. Backend deve validar existir. Opcionalmente PUT /alunos/:cpf

Novo Curso: POST /cursos — cria curso; PUT /cursos/:codigo atualiza

Nova Disciplina: POST /disciplinas

Inserir Fornecedor: POST /fornecedores ou PUT /fornecedores/:cnpj

Inserir Nota: POST /notas (criar) ou PUT /notas/:id (alterar)

Excluir usuário: DELETE /usuarios/:cpf (apenas por admin)

Gerência (painel): GET /usuarios?tipo_conta=..., GET /docentes, GET /fornecedores, GET /alunos

Notas (lista do usuário): GET /notas?cpf=11111111111

4) Exemplos de payloads e respostas (resumo prático)

Criar usuário (POST /usuarios)
Request:

{
  "cpf":"11111111111",
  "nome":"Fulano",
  "email":"f@x.com",
  "telefone":"9999-9999",
  "tipo_conta":"usuario",
  "senha":"senha123"
}


Response 201:

{ "cpf":"11111111111", "nome":"Fulano", "email":"f@x.com", "telefone":"9999-9999", "tipo_conta":"usuario" }


Atribuir aluno (PUT /usuarios/:cpf)
Request:

{
  "curso":"ADS",
  "situacao":"Ativo",
  "tipo_conta":"aluno"
}


Response 200: usuário atualizado.

Criar nota (POST /notas)
Request:

{ "cpf":"11111111111", "disciplina":"ALG", "nota":7.5 }


Response 201:

{ "id":"nota_abc123", "cpf":"11111111111", "disciplina":"ALG", "nota":7.5 }

5) Dicas técnicas para o time backend

Use UUID/JWT para tokens. Retorne usuario sem senha.

Armazene senha como hash (bcrypt).

Valide CPF/CNPJ com máscara removida (apenas dígitos).

Considere endpoints idempotentes e valide PUT para não alterar a chave primária.

Ofereça filtros para listagens (ex: GET /usuarios?tipo_conta=aluno&curso=ADS).

Documente o contrato com exemplos (Swagger/OpenAPI ideal).